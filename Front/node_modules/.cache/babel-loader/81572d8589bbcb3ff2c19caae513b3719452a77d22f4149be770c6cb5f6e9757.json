{"ast":null,"code":"import axios from'axios';import{useNavigate,useParams}from'react-router-dom';import React,{useEffect,useState}from'react';import Button from'react-bootstrap/Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditThali=()=>{const params=useParams();const navigate=useNavigate();const[name,setName]=useState(\"\");const[price,setPrice]=useState(\"\");const[image,setImage]=useState(null);// Changed to null to handle file input better\nconst[qty,setQty]=useState(\"\");const[discription,setDiscription]=useState(\"\");// Fixed spelling\nconst findHandler=async()=>{try{const{data}=await axios.get(`${window.location.origin}/api/v3/thali/search/${params.id}`);if(data&&data.length>0){setName(data[0].name);setPrice(data[0].price);setImage(data[0].image);setQty(data[0].qty);setDiscription(data[0].discription);// Fixed spelling\n}}catch(error){console.error(\"Error fetching thali details:\",error);}};useEffect(()=>{localStorage.removeItem('action');findHandler();},[]);const cancelHandler=()=>{navigate('/');};const editHandler=async event=>{event.preventDefault();const formData=new FormData();formData.append(\"name\",name);formData.append(\"price\",price);formData.append(\"qty\",qty);formData.append(\"discription\",discription);// Fixed spelling\nif(image){formData.append(\"image\",image);}try{await axios.put(`${window.location.origin}/api/v3/thali/update/${params.id}`,formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});localStorage.setItem('action',JSON.stringify('One recard updated successfully!!'));navigate('/');}catch(error){console.error(\"Error updating thali:\",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container p-0\",style:{marginTop:'90px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\" p-2 p-md-5 mt-2\",style:{borderRadius:'5px'},onSubmit:editHandler,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Update food\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"Thali name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:name,onChange:e=>setName(e.target.value),className:\"form-control\",required:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",className:\"form-label\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price\",value:price,onChange:e=>setPrice(e.target.value),className:\"form-control\",required:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"qty\",className:\"form-label\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"qty\",value:qty,onChange:e=>setQty(e.target.value),className:\"form-control\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",className:\"form-label\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",onChange:event=>setImage(event.target.files[0]),className:\"form-control\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"description\",value:discription,onChange:e=>setDiscription(e.target.value),className:\"form-control\",required:true})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"dark\",children:\"Edit\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:cancelHandler,children:\"Close\"})})})]})]})})})})});};export default EditThali;","map":{"version":3,"names":["axios","useNavigate","useParams","React","useEffect","useState","Button","jsx","_jsx","jsxs","_jsxs","EditThali","params","navigate","name","setName","price","setPrice","image","setImage","qty","setQty","discription","setDiscription","findHandler","data","get","window","location","origin","id","length","error","console","localStorage","removeItem","cancelHandler","editHandler","event","preventDefault","formData","FormData","append","put","headers","setItem","JSON","stringify","className","style","marginTop","children","borderRadius","onSubmit","htmlFor","type","value","onChange","e","target","required","files","variant","onClick"],"sources":["C:/Users/HP/Desktop/METRODELICIOUS/Front/src/EditThali.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\n\r\nconst EditThali = () => {\r\n    const params = useParams();\r\n    const navigate = useNavigate();\r\n    const [name, setName] = useState(\"\");\r\n    const [price, setPrice] = useState(\"\");\r\n    const [image, setImage] = useState(null); // Changed to null to handle file input better\r\n    const [qty, setQty] = useState(\"\");\r\n    const [discription, setDiscription] = useState(\"\"); // Fixed spelling\r\n\r\n    const findHandler = async () => {\r\n        try {\r\n            const { data } = await axios.get(`${window.location.origin}/api/v3/thali/search/${params.id}`);\r\n            if (data && data.length > 0) {\r\n                setName(data[0].name);\r\n                setPrice(data[0].price);\r\n                setImage(data[0].image);\r\n                setQty(data[0].qty);\r\n                setDiscription(data[0].discription); // Fixed spelling\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching thali details:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        localStorage.removeItem('action');\r\n        findHandler();\r\n    }, []);\r\n\r\n    const cancelHandler = () => {\r\n        navigate('/');\r\n    };\r\n\r\n    const editHandler = async (event) => {\r\n        event.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append(\"name\", name);\r\n        formData.append(\"price\", price);\r\n        formData.append(\"qty\", qty);\r\n        formData.append(\"discription\", discription); // Fixed spelling\r\n        if (image) {\r\n            formData.append(\"image\", image);\r\n        }\r\n\r\n        try {\r\n            await axios.put(`${window.location.origin}/api/v3/thali/update/${params.id}`, formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n            });\r\n            localStorage.setItem('action', JSON.stringify('One recard updated successfully!!'))\r\n            navigate('/');\r\n        } catch (error) {\r\n            console.error(\"Error updating thali:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container p-0\" style={{ marginTop: '90px' }}>\r\n            <div className=\"row justify-content-center\">\r\n                <div className=\"col-12 col-lg-6\">\r\n                    <div className='container'>\r\n                        <form className=\" p-2 p-md-5 mt-2\" style={{\r\n                            borderRadius: '5px',\r\n                        }} onSubmit={editHandler}>\r\n                            <h3 className=\"text-center\">Update food</h3>\r\n                            <div className='row'>\r\n                                <div className=\"col-12\">\r\n                                    <label htmlFor=\"name\" className=\"form-label\">Thali name</label>\r\n                                    <input type=\"text\" name=\"name\"\r\n                                        value={name}\r\n                                        onChange={(e) => setName(e.target.value)}\r\n                                        className=\"form-control\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className='row'>\r\n                                <div className=\"col-12\">\r\n                                    <label htmlFor=\"price\" className=\"form-label\">Price</label>\r\n                                    <input type=\"text\" name=\"price\"\r\n                                        value={price}\r\n                                        onChange={(e) => setPrice(e.target.value)}\r\n                                        className=\"form-control\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className='row'>\r\n                                <div className=\"col-12\">\r\n                                    <label htmlFor=\"qty\" className=\"form-label\">Qty</label>\r\n                                    <input type=\"number\" name=\"qty\"\r\n                                        value={qty}\r\n                                        onChange={(e) => setQty(e.target.value)}\r\n                                        className=\"form-control\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className='row'>\r\n                                <div className=\"col-12\">\r\n                                    <label htmlFor=\"image\" className=\"form-label\">Image</label>\r\n                                    <input type=\"file\" name=\"image\"\r\n                                        onChange={(event) => setImage(event.target.files[0])}\r\n                                        className=\"form-control\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className='row'>\r\n                                <div className=\"col-12\">\r\n                                    <label htmlFor=\"description\" className=\"form-label\">Description</label>\r\n                                    <input type=\"text\" name=\"description\"\r\n                                        value={discription}\r\n                                        onChange={(e) => setDiscription(e.target.value)}\r\n                                        className=\"form-control\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className='row mt-3'>\r\n                                <div className='col-6'>\r\n                                    <div className=\"d-grid gap-2\">\r\n                                        <Button type='submit' variant=\"dark\">\r\n                                            Edit\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='col-6'>\r\n                                    <div className=\"d-grid gap-2\">\r\n                                        <Button variant=\"secondary\" onClick={cancelHandler}>\r\n                                            Close\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EditThali;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}